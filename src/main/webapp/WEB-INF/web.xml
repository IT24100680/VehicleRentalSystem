<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
         http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">

  <display-name>Vehicle Rental System</display-name>
  <description>Web-based Vehicle Rental Management System</description>

  <!-- Welcome File List -->
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <!-- Session Configuration (30 minutes timeout) -->
  <session-config>
    <session-timeout>30</session-timeout>
    <cookie-config>
      <http-only>true</http-only>
    </cookie-config>
  </session-config>

  <!-- Character Encoding Filter -->
  <filter>
    <filter-name>EncodingFilter</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
      <param-name>ignore</param-name>
      <param-value>false</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <!-- Session Check Filter for Protected Pages -->
  <filter>
    <filter-name>SessionCheckFilter</filter-name>
    <filter-class>com.vehiclerental.controller.auth.SessionCheckFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/profile</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/updateProfile</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/changePassword</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/createBooking</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/viewBookings</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/createPayment</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/viewPayments</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/createTicket</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/viewTickets</url-pattern>
  </filter-mapping>

  <!-- ====================================== -->
  <!-- USER MANAGEMENT SERVLETS -->
  <!-- ====================================== -->

  <!-- Register Servlet -->
  <servlet>
    <servlet-name>RegisterServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.RegisterServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>RegisterServlet</servlet-name>
    <url-pattern>/register</url-pattern>
  </servlet-mapping>

  <!-- Login Servlet -->
  <servlet>
    <servlet-name>LoginServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.LoginServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/login</url-pattern>
  </servlet-mapping>

  <!-- Logout Servlet -->
  <servlet>
    <servlet-name>LogoutServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.auth.LogoutServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>LogoutServlet</servlet-name>
    <url-pattern>/logout</url-pattern>
  </servlet-mapping>

  <!-- Profile Servlet -->
  <servlet>
    <servlet-name>ProfileServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.ProfileServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ProfileServlet</servlet-name>
    <url-pattern>/profile</url-pattern>
  </servlet-mapping>

  <!-- Update Profile Servlet -->
  <servlet>
    <servlet-name>UpdateProfileServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.UpdateProfileServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>UpdateProfileServlet</servlet-name>
    <url-pattern>/updateProfile</url-pattern>
  </servlet-mapping>

  <!-- Change Password Servlet -->
  <servlet>
    <servlet-name>ChangePasswordServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.ChangePasswordServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ChangePasswordServlet</servlet-name>
    <url-pattern>/changePassword</url-pattern>
  </servlet-mapping>

  <!-- Deactivate User Servlet -->
  <servlet>
    <servlet-name>DeactivateUserServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.DeactivateUserServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DeactivateUserServlet</servlet-name>
    <url-pattern>/deactivateUser</url-pattern>
  </servlet-mapping>

  <!-- Admin User Management Servlet -->
  <servlet>
    <servlet-name>AdminUserServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.user.AdminUserServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AdminUserServlet</servlet-name>
    <url-pattern>/admin/users</url-pattern>
  </servlet-mapping>

  <!-- ====================================== -->
  <!-- VEHICLE MANAGEMENT SERVLETS -->
  <!-- ====================================== -->

  <!-- Vehicle List Servlet -->
  <servlet>
    <servlet-name>VehicleListServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.VehicleListServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>VehicleListServlet</servlet-name>
    <url-pattern>/vehicles</url-pattern>
  </servlet-mapping>

  <!-- View Vehicle Servlet -->
  <servlet>
    <servlet-name>ViewVehicleServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.ViewVehicleServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ViewVehicleServlet</servlet-name>
    <url-pattern>/viewVehicle</url-pattern>
  </servlet-mapping>

  <!-- Manage Vehicles Servlet -->
  <servlet>
    <servlet-name>ManageVehiclesServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.ManageVehiclesServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ManageVehiclesServlet</servlet-name>
    <url-pattern>/admin/manageVehicles</url-pattern>
  </servlet-mapping>

  <!-- Add Vehicle Servlet -->
  <servlet>
    <servlet-name>AddVehicleServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.AddVehicleServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AddVehicleServlet</servlet-name>
    <url-pattern>/admin/addVehicle</url-pattern>
  </servlet-mapping>

  <!-- Edit Vehicle Servlet -->
  <servlet>
    <servlet-name>EditVehicleServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.EditVehicleServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>EditVehicleServlet</servlet-name>
    <url-pattern>/admin/editVehicle</url-pattern>
  </servlet-mapping>

  <!-- Update Vehicle Servlet -->
  <servlet>
    <servlet-name>UpdateVehicleServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.UpdateVehicleServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>UpdateVehicleServlet</servlet-name>
    <url-pattern>/admin/updateVehicle</url-pattern>
  </servlet-mapping>

  <!-- Delete Vehicle Servlet -->
  <servlet>
    <servlet-name>DeleteVehicleServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.vehicle.DeleteVehicleServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DeleteVehicleServlet</servlet-name>
    <url-pattern>/admin/deleteVehicle</url-pattern>
  </servlet-mapping>

  <!-- ====================================== -->
  <!-- BOOKING MANAGEMENT SERVLETS -->
  <!-- ====================================== -->

  <!-- Create Booking Servlet -->
  <servlet>
    <servlet-name>CreateBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.CreateBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreateBookingServlet</servlet-name>
    <url-pattern>/createBooking</url-pattern>
  </servlet-mapping>

  <!-- View Booking Servlet -->
  <servlet>
    <servlet-name>ViewBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.ViewBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ViewBookingServlet</servlet-name>
    <url-pattern>/viewBookings</url-pattern>
  </servlet-mapping>

  <!-- Edit Booking Servlet -->
  <servlet>
    <servlet-name>EditBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.EditBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>EditBookingServlet</servlet-name>
    <url-pattern>/editBooking</url-pattern>
  </servlet-mapping>

  <!-- Delete Booking Servlet -->
  <servlet>
    <servlet-name>DeleteBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.DeleteBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DeleteBookingServlet</servlet-name>
    <url-pattern>/deleteBooking</url-pattern>
  </servlet-mapping>

  <!-- Admin Booking Management Servlet -->
  <servlet>
    <servlet-name>AdminBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.AdminBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AdminBookingServlet</servlet-name>
    <url-pattern>/admin/bookings</url-pattern>
  </servlet-mapping>

  <!-- Admin Edit Booking Servlet -->
  <servlet>
    <servlet-name>AdminEditBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.AdminEditBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AdminEditBookingServlet</servlet-name>
    <url-pattern>/admin/editBooking</url-pattern>
  </servlet-mapping>

  <!-- Admin Delete Booking Servlet -->
  <servlet>
    <servlet-name>AdminDeleteBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.AdminDeleteBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AdminDeleteBookingServlet</servlet-name>
    <url-pattern>/admin/deleteBooking</url-pattern>
  </servlet-mapping>

  <!-- Approve Booking Servlet -->
  <servlet>
    <servlet-name>ApproveBookingServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.booking.ApproveBookingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ApproveBookingServlet</servlet-name>
    <url-pattern>/admin/approveBooking</url-pattern>
  </servlet-mapping>

  <!-- ====================================== -->
  <!-- PAYMENT MANAGEMENT SERVLETS -->
  <!-- ====================================== -->

  <!-- Create Payment Servlet -->
  <servlet>
    <servlet-name>CreatePaymentServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.payment.CreatePaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreatePaymentServlet</servlet-name>
    <url-pattern>/createPayment</url-pattern>
  </servlet-mapping>

  <!-- View Payment Servlet -->
  <servlet>
    <servlet-name>ViewPaymentServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.payment.ViewPaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ViewPaymentServlet</servlet-name>
    <url-pattern>/viewPayments</url-pattern>
  </servlet-mapping>

  <!-- Edit Payment Servlet -->
  <servlet>
    <servlet-name>EditPaymentServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.payment.EditPaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>EditPaymentServlet</servlet-name>
    <url-pattern>/editPayment</url-pattern>
  </servlet-mapping>

  <!-- Delete Payment Servlet -->
  <servlet>
    <servlet-name>DeletePaymentServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.payment.DeletePaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DeletePaymentServlet</servlet-name>
    <url-pattern>/deletePayment</url-pattern>
  </servlet-mapping>

  <!-- Refund Request Servlet -->
  <servlet>
    <servlet-name>RefundRequestServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.payment.RefundRequestServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>RefundRequestServlet</servlet-name>
    <url-pattern>/refundRequest</url-pattern>
  </servlet-mapping>

  <!-- Approve Payment Servlet -->
  <servlet>
    <servlet-name>ApprovePaymentServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.payment.ApprovePaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ApprovePaymentServlet</servlet-name>
    <url-pattern>/admin/approvePayment</url-pattern>
  </servlet-mapping>

  <!-- ====================================== -->
  <!-- FEEDBACK MANAGEMENT SERVLETS -->
  <!-- ====================================== -->

  <!-- Add Feedback Servlet -->
  <servlet>
    <servlet-name>AddFeedbackServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.feedback.AddFeedbackServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AddFeedbackServlet</servlet-name>
    <url-pattern>/addFeedback</url-pattern>
  </servlet-mapping>

  <!-- View Feedback Servlet -->
  <servlet>
    <servlet-name>ViewFeedbackServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.feedback.ViewFeedbackServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ViewFeedbackServlet</servlet-name>
    <url-pattern>/viewFeedback</url-pattern>
  </servlet-mapping>

  <!-- Edit Feedback Servlet -->
  <servlet>
    <servlet-name>EditFeedbackServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.feedback.EditFeedbackServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>EditFeedbackServlet</servlet-name>
    <url-pattern>/editFeedback</url-pattern>
  </servlet-mapping>

  <!-- Delete Feedback Servlet -->
  <servlet>
    <servlet-name>DeleteFeedbackServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.feedback.DeleteFeedbackServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DeleteFeedbackServlet</servlet-name>
    <url-pattern>/deleteFeedback</url-pattern>
  </servlet-mapping>

  <!-- Admin Feedback Servlet -->
  <servlet>
    <servlet-name>AdminFeedbackServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.feedback.AdminFeedbackServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AdminFeedbackServlet</servlet-name>
    <url-pattern>/admin/feedbacks</url-pattern>
  </servlet-mapping>

  <!-- ====================================== -->
  <!-- TICKET MANAGEMENT SERVLETS -->
  <!-- ====================================== -->

  <!-- Create Ticket Servlet -->
  <servlet>
    <servlet-name>CreateTicketServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.staff.CreateTicketServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreateTicketServlet</servlet-name>
    <url-pattern>/createTicket</url-pattern>
  </servlet-mapping>

  <!-- View Ticket Servlet -->
  <servlet>
    <servlet-name>ViewTicketServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.staff.ViewTicketServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ViewTicketServlet</servlet-name>
    <url-pattern>/viewTickets</url-pattern>
  </servlet-mapping>

  <!-- Update Ticket Servlet -->
  <servlet>
    <servlet-name>UpdateTicketServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.staff.UpdateTicketServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>UpdateTicketServlet</servlet-name>
    <url-pattern>/updateTicket</url-pattern>
  </servlet-mapping>

  <!-- Delete Ticket Servlet -->
  <servlet>
    <servlet-name>DeleteTicketServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.staff.DeleteTicketServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DeleteTicketServlet</servlet-name>
    <url-pattern>/deleteTicket</url-pattern>
  </servlet-mapping>

  <!-- Resolve Ticket Servlet -->
  <servlet>
    <servlet-name>ResolveTicketServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.staff.ResolveTicketServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ResolveTicketServlet</servlet-name>
    <url-pattern>/admin/resolveTicket</url-pattern>
  </servlet-mapping>

  <!-- Dashboard Servlet -->
  <servlet>
    <servlet-name>DashboardServlet</servlet-name>
    <servlet-class>com.vehiclerental.controller.DashboardServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>DashboardServlet</servlet-name>
    <url-pattern>/dashboard</url-pattern>
  </servlet-mapping>

  <!-- ====================================== -->
  <!-- ERROR PAGES -->
  <!-- ====================================== -->

  <error-page>
    <error-code>403</error-code>
    <location>/jsp/error/403.jsp</location>
  </error-page>

  <error-page>
    <error-code>404</error-code>
    <location>/jsp/error/404.jsp</location>
  </error-page>

  <error-page>
    <error-code>500</error-code>
    <location>/jsp/error/500.jsp</location>
  </error-page>

  <error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/jsp/error/500.jsp</location>
  </error-page>

  <!-- ====================================== -->
  <!-- MIME TYPE MAPPINGS -->
  <!-- ====================================== -->

  <mime-mapping>
    <extension>css</extension>
    <mime-type>text/css</mime-type>
  </mime-mapping>

  <mime-mapping>
    <extension>js</extension>
    <mime-type>application/javascript</mime-type>
  </mime-mapping>

  <mime-mapping>
    <extension>json</extension>
    <mime-type>application/json</mime-type>
  </mime-mapping>

  <mime-mapping>
    <extension>jpg</extension>
    <mime-type>image/jpeg</mime-type>
  </mime-mapping>

  <mime-mapping>
    <extension>png</extension>
    <mime-type>image/png</mime-type>
  </mime-mapping>

  <mime-mapping>
    <extension>svg</extension>
    <mime-type>image/svg+xml</mime-type>
  </mime-mapping>

</web-app>